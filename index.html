<!DOCTYPE html>
<html>
<head>
  <title>dyrk's space</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="https://unpkg.com/98.css" />
  <style>
    body {
      background-color: lightpink;
    }

    .audio-player {
      width: 250px;
      margin: 10px;
      margin-top: 20px;
    }
    
    .slider {
      margin: 10px 0;
      padding: 10px;
    }
    
    .controls button {
      margin-right: 5px;
    }
    
  </style>
</head>

<body>
  <label class="bg-text" style="top: 40px; right: 40px; font-size: 32px; color: white; position: fixed;">i got too silly</label>
  <script>
    const bgLabel = document.querySelector(".bg-text");
  
    function updateText() {
      bgLabel.textContent = `i g${Math.floor(Math.random() * 10)}t too silly`;
    }

    updateText();
    setInterval(updateText, 100);
  </script>
  <div class="window song-window" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 280px; height: 120px">
    <div class="title-bar song-window-bar">
      <div class="title-bar-text">
        <a class="song-title" style="color: white;">hello :3</a>
      </div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close"></button>
      </div>
    </div>
    <div class="window-body">
      <div class="audio-player">
        <audio id="song" src="goober.mp3"></audio>
        <div class="slider field-row">
          <input type="range" id="seekSlider" min="0" step="0.01" value="0" />
          <label for="seekSlider" class="time-crnt">00:00</label>
        </div>
        <div class="controls">
          <button id="playBtn">Play</button>
          <button id="pauseBtn">Pause</button>
          <button id="stopBtn">Stop</button>
        </div>
        <script src="https://unpkg.com/draggable@4.2.0/dist/draggable.min.js"></script>
        <script src="app.js"></script>
        
      </div>
    </div>
  </div>
  <div class="window typebox-window" style="width: 300px; position: absolute; top: 20%; right: 20%; transform: translate(-20%, -20%);">
    <div class="title-bar typebox-window-bar">
      <div class="title-bar-text">dyrk-ai</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close"></button>
      </div>
    </div>
    <div class="window-body">
      <div class="field-row-stacked" style="width: 200px">
        <label for="typingbox">this ai was trained to act as dyrk</label>
        <textarea readonly id="typingbox" style="height: 110px; width: 290px; resize: none;" rows="8"></textarea>
      </div>
    </div>
  </div>
    <div class="window offlchat-window" style="width: 400px; height: 400px; position: absolute; top: 20%; left: 10%; transform: translate(-20%, -30%);">
      <div class="title-bar offlchat-window-bar">
        <div class="title-bar-text">Offline Chat</div>
        <div class="title-bar-controls">
          <button aria-label="Minimize"></button>
          <button aria-label="Maximize"></button>
          <button aria-label="Close"></button>
        </div>
      </div>
      <div class="window-body">
        <div class="field-row-stacked">
          <label for="chatlog">Chat</label>
          <textarea readonly id="chatlog" rows="8" style="height: 300px; width: 390px;"></textarea>
        </div>
        <div class="field-row-stacked" style="width: 380px">
          <label for="textinput">Offline: 497k users.</label>
          <input id="textinput" type="text" />
        </div>
        <script>
          var messageInput = document.getElementById("textinput");
          var messageContainer = document.getElementById("chatlog");

          var randomNickname = ""; // Variable to store the random nickname

          async function getRandomWord(url) {
            const response = await fetch(url);
            const text = await response.text();
            const lines = text.split('\n');
            const filteredLines = lines.filter(word => word.length < 7);
            return filteredLines[Math.floor(Math.random() * filteredLines.length)];
          }

          async function generateRandomString() {
            const adjectiveUrl = 'https://raw.githubusercontent.com/taikuukaits/SimpleWordlists/master/Wordlist-Adjectives-All.txt';
            const nounUrl = 'https://raw.githubusercontent.com/taikuukaits/SimpleWordlists/master/Wordlist-Nouns-All.txt';

            const adjective = await getRandomWord(adjectiveUrl);
            const noun = await getRandomWord(nounUrl);
            const randomInt = Math.floor(Math.random() * 10);

            const capitalizedAdjective = adjective.charAt(0).toUpperCase() + adjective.slice(1);
            const capitalizedNoun = noun.charAt(0).toUpperCase() + noun.slice(1);

            return capitalizedAdjective + capitalizedNoun + randomInt;
          }

          function sendMessage() {
            var message = messageInput.value.trim();

            if (message !== "") {
              if (randomNickname === "") {
                // Generate random nickname if not already generated
                generateRandomString().then(nickname => {
                  randomNickname = nickname;
                  sendMessageWithNickname(message);
                });
              } else {
                // Use the existing random nickname
                sendMessageWithNickname(message);
              }
              
              messageContainer.scrollTop = messageContainer.scrollHeight;
            }
          }

          function sendMessageWithNickname(message) {
            // Append the random string (nickname), message, and a new line to the message container
            const fullMessage = randomNickname + ": " + message + '\n';
            messageContainer.value += fullMessage;
            messageInput.value = ''
          }

          messageInput.addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
              sendMessage();
            }
          });

        </script>
      </div>
    </div>
    
    <script>
      function simulateTyping() {
        var characters = 'abcdefghijklmnopqrstuvwxyz    ';
        var typingSpeed = 100;
        var pauseDuration = 2000;
        var typingElement = document.getElementById('typingbox');
        var currentText = typingElement.value;
        var randomCharacter = characters.charAt(Math.floor(Math.random() * characters.length));
        typingElement.value = currentText + (randomCharacter);
        var isSpace = (randomCharacter === ' ');
        var typingDelay = Math.floor(Math.random() * typingSpeed) + 50;
        typingElement.scrollTop = typingElement.scrollHeight;
  
        setTimeout(function () {
          if (isSpace) {
            setTimeout(simulateTyping, pauseDuration);
          } else {
            simulateTyping();
          }
        }, typingDelay);
      }
  
      window.onload = simulateTyping;
    </script>
  </div>
  <script>
    const draggableWindowSong = new Draggable(document.querySelector('.song-window'), {
      handle: document.querySelector('.song-window-bar')
    });

    const draggableWindowTB = new Draggable(document.querySelector('.typebox-window'), {
      handle: document.querySelector('.typebox-window-bar')
    });

    const draggableWindowOfflChat = new Draggable(document.querySelector('.offlchat-window'), {
      handle: document.querySelector('.offlchat-window-bar')
    });
  </script>
</body>
</html>